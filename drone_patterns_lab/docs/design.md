# Drone Mission Control System - Design Document

## 1. Огляд
Ця система розроблена для керування різнорідними дронами (повітряні, морські, наземні) за допомогою модульної архітектури. Система дозволяє динамічно збирати місії, адаптуватися до умов середовища та обробляти збої.

## 2. Архітектура та Патерни

### 2.1 Template Method (Шаблонний Метод)
**Де:** `drones/template/base.py` -> `drones/missions/*`
**Навіщо:** Визначає скелет алгоритму виконання місії (Зліт -> Навігація -> Дія -> Посадка). Конкретні місії (наприклад, `Agriculture`) змінюють лише крок `perform_payload_action`, не ламаючи загальну логіку.

### 2.2 Bridge (Міст)
**Де:** `drones/bridge/controller.py` <-> `drones/bridge/base.py`
**Навіщо:** Розділяє високорівневу логіку керування ("летіти в точку X") від фізичної реалізації платформи (крутити гвинти `AirPlatform` або гребти `SeaPlatform`). Це дозволяє додавати нові типи дронів без зміни коду контролера.

### 2.3 Strategy (Стратегія)
**Де:** `drones/strategy/`
**Навіщо:** Дозваляє дрону змінювати поведінку "на льоту" залежно від умов. Наприклад, при сильному вітрі підключається `WindReaction` (зниження висоти), а при штормі на морі — `WaveReaction`.

### 2.4 Observer (Спостерігач)
**Де:** `drones/observer/event_bus.py`
**Навіщо:** Створює слабку зв'язаність (loose coupling). Середовище (`Environment`) публікує події (вітер, перешкоди), а дрон підписується на них. Вони не знають напряму один про одного.

### 2.5 Chain of Responsibility (Ланцюжок Обов'язків)
**Де:** `drones/cor/`
**Навіщо:** Система Fail-Safe. Якщо виникає помилка, вона передається по ланцюжку:
1. `ReRoute` (спробувати облетіти)
2. `AdjustAltitude` (змінити висоту)
3. `EmergencyLand` (сідати, якщо нічого не допомогло).

### 2.6 Abstract Factory (Абстрактна Фабрика)
**Де:** `drones/factory/mission_factory.py`
**Навіщо:** Централізоване створення складних об'єктів. Фабрика отримує JSON-конфіг і збирає правильну комбінацію: Дрон + Середовище + Стратегія.

## 3. API
Система надає REST API (FastAPI) для запуску місій:
- `POST /mission/run`: Запуск нової місії.
- `GET /mission/status/{id}`: Перевірка статусу.